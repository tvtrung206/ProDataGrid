<!-- Shared filter editor resources for DataGrid filter UI -->
<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:filtering="clr-namespace:Avalonia.Controls.DataGridFiltering;assembly=Avalonia.Controls.DataGrid">
  <SolidColorBrush x:Key="DataGridFilterFlyoutBackgroundBrush" Color="#F8F8F8" />

  <!-- Flyout presenter theme for filter popups -->
  <ControlTheme x:Key="DataGridFilterFlyoutPresenterTheme" TargetType="FlyoutPresenter">
    <Setter Property="Padding" Value="12" />
    <Setter Property="CornerRadius" Value="4" />
    <Setter Property="Background" Value="{DynamicResource DataGridFilterFlyoutBackgroundBrush}" />
  </ControlTheme>

  <!-- Text contains/starts a filter -->
  <DataTemplate x:Key="DataGridFilterTextEditorTemplate"
                x:DataType="filtering:IFilterTextContext">
    <StackPanel Spacing="8" Width="240">
      <TextBlock Text="{Binding Label, FallbackValue=Text filter}" FontWeight="SemiBold" />
      <TextBox Watermark="Contains"
               Text="{Binding Text, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
      <StackPanel Orientation="Horizontal" Spacing="6">
        <Button Content="Clear" Command="{Binding ClearCommand}" />
        <Button Content="Apply" Command="{Binding ApplyCommand}" />
      </StackPanel>
    </StackPanel>
  </DataTemplate>

  <!-- Number range/between filter -->
  <DataTemplate x:Key="DataGridFilterNumberEditorTemplate"
                x:DataType="filtering:IFilterNumberContext">
    <StackPanel Spacing="8" Width="240">
      <TextBlock Text="{Binding Label, FallbackValue=Number filter}" FontWeight="SemiBold" />
      <StackPanel Orientation="Horizontal" Spacing="6">
        <NumericUpDown Width="100"
                       Minimum="{Binding Minimum, FallbackValue=0}"
                       Maximum="{Binding Maximum, FallbackValue=1000000}"
                       Value="{Binding MinValue, Mode=TwoWay}" />
        <TextBlock VerticalAlignment="Center" Text="to" />
        <NumericUpDown Width="100"
                       Minimum="{Binding Minimum, FallbackValue=0}"
                       Maximum="{Binding Maximum, FallbackValue=1000000}"
                       Value="{Binding MaxValue, Mode=TwoWay}" />
      </StackPanel>
      <StackPanel Orientation="Horizontal" Spacing="6">
        <Button Content="Clear" Command="{Binding ClearCommand}" />
        <Button Content="Apply" Command="{Binding ApplyCommand}" />
      </StackPanel>
    </StackPanel>
  </DataTemplate>

  <!-- Date range filter -->
  <DataTemplate x:Key="DataGridFilterDateEditorTemplate"
                x:DataType="filtering:IFilterDateContext">
    <StackPanel Spacing="8" Width="260">
      <TextBlock Text="{Binding Label, FallbackValue=Date filter}" FontWeight="SemiBold" />
      <StackPanel Spacing="6">
        <DatePicker SelectedDate="{Binding From, Mode=TwoWay}" />
        <DatePicker SelectedDate="{Binding To, Mode=TwoWay}" />
      </StackPanel>
      <StackPanel Orientation="Horizontal" Spacing="6">
        <Button Content="Clear" Command="{Binding ClearCommand}" />
        <Button Content="Apply" Command="{Binding ApplyCommand}" />
      </StackPanel>
    </StackPanel>
  </DataTemplate>

  <!-- Enum/string multi-select filter -->
  <DataTemplate x:Key="DataGridFilterEnumEditorTemplate"
                x:DataType="filtering:IFilterEnumContext">
    <StackPanel Spacing="8" Width="240">
      <TextBlock Text="{Binding Label, FallbackValue=Options}" FontWeight="SemiBold" />
      <ItemsControl ItemsSource="{Binding Options}">
        <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
            <UniformGrid Columns="2" />
          </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
          <DataTemplate x:DataType="filtering:IEnumOption">
            <CheckBox Content="{Binding Display}"
                      IsChecked="{Binding IsSelected, Mode=TwoWay}" />
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
      <StackPanel Orientation="Horizontal" Spacing="6">
        <Button Content="Clear" Command="{Binding ClearCommand}" />
        <Button Content="Apply" Command="{Binding ApplyCommand}" />
      </StackPanel>
    </StackPanel>
  </DataTemplate>
</ResourceDictionary>
