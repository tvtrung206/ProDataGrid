<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Avalonia.Diagnostics.ViewModels"
             x:Class="Avalonia.Diagnostics.Views.AssetsPageView"
             x:DataType="vm:AssetsPageViewModel">
  <Grid RowDefinitions="Auto,Auto,*">
    <StackPanel Orientation="Horizontal"
                Spacing="12"
                Margin="8,6,8,4">
      <TextBlock Text="{Binding Status}" />
      <TextBlock Text="{Binding AssetCount, StringFormat=Assets: {0}}" Foreground="Gray" />
    </StackPanel>

    <FilterTextBox Grid.Row="1"
                   Margin="8,0,8,4"
                   DataContext="{Binding AssetsFilter}"
                   Text="{Binding FilterString}"
                   Watermark="Search assets"
                   UseCaseSensitiveFilter="{Binding UseCaseSensitiveFilter}"
                   UseWholeWordFilter="{Binding UseWholeWordFilter}"
                   UseRegexFilter="{Binding UseRegexFilter}" />

    <DataGrid Grid.Row="2"
              Name="assetsGrid"
              ItemsSource="{Binding AssetsView}"
              SelectedItem="{Binding SelectedAsset, Mode=TwoWay}"
              AutoGenerateColumns="False"
              HeadersVisibility="Column"
              BorderThickness="0"
              SelectionMode="Single"
              HorizontalScrollBarVisibility="Auto"
              CanUserResizeColumns="True"
              CanUserReorderColumns="False"
              CanUserSortColumns="True"
              DoubleTapped="OnAssetDoubleTapped">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Name"
                            Binding="{Binding Name}"
                            Width="2*"
                            IsReadOnly="True"
                            x:DataType="vm:AssetEntryViewModel" />
        <DataGridTextColumn Header="Assembly"
                            Binding="{Binding AssemblyName}"
                            Width="2*"
                            IsReadOnly="True"
                            x:DataType="vm:AssetEntryViewModel" />
        <DataGridTextColumn Header="Path"
                            Binding="{Binding AssetPath}"
                            Width="3*"
                            IsReadOnly="True"
                            x:DataType="vm:AssetEntryViewModel" />
        <DataGridTextColumn Header="Kind"
                            Binding="{Binding KindDisplay}"
                            Width="1*"
                            IsReadOnly="True"
                            x:DataType="vm:AssetEntryViewModel" />
        <DataGridTextColumn Header="Ext"
                            Binding="{Binding Extension}"
                            Width="0.8*"
                            IsReadOnly="True"
                            x:DataType="vm:AssetEntryViewModel" />
      </DataGrid.Columns>
      <DataGrid.ContextFlyout>
        <MenuFlyout>
          <MenuItem Header="Preview"
                    Command="{Binding PreviewAsset}"
                    IsEnabled="{Binding HasPreviewSelection}" />
          <MenuItem Header="Copy Asset Uri"
                    Command="{Binding CopyAssetUri}"
                    IsEnabled="{Binding HasSelection}" />
          <MenuItem Header="Export Asset..."
                    Command="{Binding ExportAsset}"
                    IsEnabled="{Binding HasSelection}" />
        </MenuFlyout>
      </DataGrid.ContextFlyout>
    </DataGrid>
  </Grid>
</UserControl>
